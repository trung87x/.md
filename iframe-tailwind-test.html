<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Iframe + Tailwind CSS Test</title>
    <style>
      body {
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica,
          Arial, "Apple Color Emoji", "Segoe UI Emoji";
        margin: 0;
        padding: 24px;
        background: #0b1020;
        color: #e5e7eb;
      }
      .wrap {
        max-width: 980px;
        margin: 0 auto;
      }
      iframe {
        width: 100%;
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 12px;
        background: white;
      }
      .toolbar {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 12px;
      }
      .toolbar button {
        padding: 8px 12px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.25);
        background: #111827;
        color: #e5e7eb;
        cursor: pointer;
      }
      .toolbar small {
        opacity: 0.8;
      }
      textarea {
        width: 100%;
        height: 220px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.15);
        background: #0f172a;
        color: #e5e7eb;
        padding: 12px;
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas,
          "Liberation Mono", monospace;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <h1 style="font-size: 28px; margin: 0 0 8px 0">
        Test Tailwind CSS trong &lt;iframe&gt;
      </h1>
      <p style="margin: 0 0 16px 0; opacity: 0.8">
        M·ªôt file .html duy nh·∫•t. N·ªôi dung b√™n trong iframe d√πng Tailwind qua CDN
        <code>cdn.tailwindcss.com</code>.
      </p>

      <div class="toolbar">
        <button id="runBtn">Ch·∫°y l·∫°i iframe</button>
        <button id="sampleBtn">T·∫£i sample</button>
        <small
          >üîß B·∫°n c√≥ th·ªÉ s·ª≠a HTML b√™n d∆∞·ªõi r·ªìi b·∫•m ‚ÄúCh·∫°y l·∫°i iframe‚Äù.</small
        >
      </div>

      <textarea id="srcEditor">
<!doctype html>
<html class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Tailwind Play CDN (v3.x) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // B·∫°n c√≥ th·ªÉ c·∫•u h√¨nh theme nhanh ·ªü ƒë√¢y n·∫øu mu·ªën
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { display: ['Inter', 'ui-sans-serif', 'system-ui'] }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://rsms.me" />
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css" />
</head>
<body class="h-full bg-gray-50">
  <div class="min-h-screen p-6">
    <div class="mx-auto max-w-4xl">
      <header class="mb-6 flex items-center justify-between">
        <h1 class="text-2xl font-bold tracking-tight">Iframe + Tailwind</h1>
        <a class="inline-flex items-center gap-2 rounded-xl border px-3 py-2 text-sm hover:bg-gray-50" href="#" onclick="alert('V√≠ d·ª• n√∫t ho·∫°t ƒë·ªông!')">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8M3 3h7v7H3V3z"/></svg>
          Action
        </a>
      </header>

      <div class="grid gap-4 md:grid-cols-3">
        <div class="rounded-2xl border bg-white p-4 shadow-sm">
          <h2 class="mb-2 font-semibold">Card 1</h2>
          <p class="text-sm text-gray-600">ƒê√¢y l√† th·∫ª demo v·ªõi border v√† shadow.</p>
          <button class="mt-3 rounded-lg bg-black px-3 py-2 text-white hover:opacity-90">Button</button>
        </div>
        <div class="rounded-2xl border bg-white p-4 shadow-sm">
          <h2 class="mb-2 font-semibold">Card 2</h2>
          <ul class="list-disc pl-5 text-sm text-gray-700">
            <li>Responsive grid</li>
            <li>Rounded corners</li>
            <li>Shadow &amp; border</li>
          </ul>
        </div>
        <div class="rounded-2xl border bg-white p-4 shadow-sm">
          <h2 class="mb-2 font-semibold">Card 3</h2>
          <p class="text-sm text-gray-600">B·∫°n c√≥ th·ªÉ th√™m b·∫•t k·ª≥ HTML/Tailwind n√†o v√†o ƒë√¢y.</p>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
</textarea
      >

      <div style="height: 12px"></div>

      <iframe
        id="demo"
        title="Tailwind in iframe"
        allow="clipboard-write"
        referrerpolicy="no-referrer"
      ></iframe>
    </div>

    <script>
      const iframe = document.getElementById("demo");
      const editor = document.getElementById("srcEditor");
      const runBtn = document.getElementById("runBtn");
      const sampleBtn = document.getElementById("sampleBtn");

      function setIframe(html) {
        // D√πng srcdoc ƒë·ªÉ ƒë·∫£m b·∫£o same-origin -> c√≥ th·ªÉ auto-resize
        iframe.srcdoc = html;

        // Ch·ªù iframe render ƒë·ªÉ auto ch·ªânh chi·ªÅu cao theo n·ªôi dung
        setTimeout(() => {
          try {
            const doc = iframe.contentDocument;
            const resize = () => {
              const h = Math.max(
                doc.body.scrollHeight,
                doc.documentElement.scrollHeight
              );
              iframe.style.height = Math.min(Math.max(h, 400), 2000) + "px";
            };
            resize();
            // Theo d√µi thay ƒë·ªïi k√≠ch th∆∞·ªõc n·ªôi dung
            const obs = new MutationObserver(resize);
            obs.observe(doc.documentElement, {
              childList: true,
              subtree: true,
              attributes: true,
              characterData: true,
            });
          } catch (e) {
            // ignore cross-origin issues (kh√¥ng x·∫£y ra v√¨ d√πng srcdoc)
          }
        }, 50);
      }

      runBtn.addEventListener("click", () => setIframe(editor.value));

      sampleBtn.addEventListener("click", () => {
        editor.value = editor.value; // gi·ªØ nguy√™n sample hi·ªán t·∫°i; b·∫°n c√≥ th·ªÉ thay b·∫±ng preset kh√°c n·∫øu mu·ªën
        setIframe(editor.value);
      });

      // N·∫°p l·∫ßn ƒë·∫ßu
      setIframe(editor.value);
    </script>
  </body>
</html>
